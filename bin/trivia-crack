#!/usr/bin/env ruby

require "thor"

require_relative "../lib/triviacrack/client"

class TriviaCrackClient < Thor

  desc "bot", "Run the Trivia Crack bot."
  method_option :email, aliases: "-e", require: true,
                desc: "Your Trivia Crack account email."
  method_option :password, aliases: "-p", require: true,
                desc: "Your Trivia Crack account password."
  method_option :start_new_games, aliases: "-n", default: false,
                desc: "Whether or not to start new games"
  method_option :solver, aliases: "-s", default: "CorrectAnswer",
                desc: "Solver that decides which answer to user."
  def bot
    bot = TriviaCrack::Client::Bot.new options[:email], options[:password]
    bot.play options[:solver], options[:start_new_games]
  end

  desc "play", "Play Trivia Crack."
  method_option :email, aliases: "-e", require: true,
                desc: "Your Trivia Crack account email."
  method_option :password, aliases: "-p", require: true,
                desc: "Your Trivia Crack account password."
  def play
    client = TriviaCrack::Client::Manual.new options[:email], options[:password]
    client.play
  end

end

TriviaCrackClient.start
